[[Translation:en/Manual/Timetable]]
{{ru/Необходимо сделать|поправить картинки}}

== Интерфейс ==
Расписание было введено в [[en/Archive/OpenTTD/OpenTTD 0.6.0]] (со времени beta 2). Кнопка расписания находится в верхнем правом углу окна приказов транспорту. Все приказы для выбранного транспорта отображаются внутри окна расписания. Вы можете задать время, которое транспортное средство проведёт на станции (в днях или циклах - выбирается в "расширенных настройках") и, если вы хотите, время, которое транспортное средство проведёт в пути между маршрутными точками. Также в этом окне есть счётчик, показывающий укладывается ли транспортное средство в график или отстаёт.

[[File:en/Orders-timetable.png|center|frame|Интерфейс расписания, доступный из окна заданий.]]

{|
| '''Изменить время (Change Time)'''
|Изменяет период времени, отведённый на прохождение маршрута.
|При нажатии появится окно для ввода нового числа.
|-
| '''Очистить время (Clear Time)'''
|Убирает ограничения по времени.
|Позволяет тратить транспортному средству на маршрут сколько угодно времени.
|-
| '''Дата начала (Start date)'''
|Изменение начальной даты для расписания.
|Появится окно, в котором можно будет задать начальную дату для расписания.
|-
| '''Автозаполнение (Autofill)'''
|Автоматическое заполнение, основанное на следующей поездке.
|Заполняет данные по времени, которые могут быть впоследствии Вами изменены.
|-
| '''Неразрушающее автозаполнение (Non-destructive autofill)'''
|Автоматическое заполнение незаданных параметров, основанное на следующей поездке.
|Полезно, когда необходимо изменить время в пути, например, после покупки более быстрого транспорта.
|-
| '''Сбросить счётчик опоздания (Reset late counter)'''
|Сбросить счётчик опоздания на ноль.
|Декларируется, что транспортное средство приходит вовремя. Позволяет предотвратить попытки транспорта нагнать отставание от графика.
|-
| '''Ожидаемое / Запланированное (Expected / Scheduled)'''
|Переключение между панелями ожидаемого и запланированного графика движения.
|Отображение запланированного или ожидаемого времени прибытия. Позволяет посмотреть опоздание/опережение транспорта.
|}
{{ru/Внимание|При включении автозаполнения (Autofill) все предыдущие данные будут перезаписаны. Будьте уверены, что Вы включили автозаполнение с сохранением предыдущих значений (Non-destructive autofill), которое может быть вызвано нажатием на кнопку автозаполнения с зажатой клавишей CTRL.}}
{{ru/Заметка|Ожидаемое/запланированное время доступно только для заполненной временной таблицы, выполнение которой началось.}}

== Использование расписаний ==
Расписание - полезный инструмент, позволяющий избежать слипания транспорта в кучу. Распределение транспорта помогает поддержать равномерный поток грузов от станции к станции. Но такие явления, как поломки, пробки и прочие задержки приводят к тому, что транспорт на маршруте сливается в одну очередь.

Для демонстрации приведём простой пример, в котором представлены 3 автобуса, передвигающиеся по круговому маршруту между тремя городами. Для данных автобусов уже настроен общий маршрут посредством создания [[ru/Manual/Задания#obshchie-zadaniia|общего задания]]. Общее задание ''очень'' полезно, так как оно позволяет также сделать общим и расписание.

Для начала выберем один автобус и включим '''автозаполнение'''. Запустив автобусы на линию мы сможем наблюдать как заполняется расписание с каждым прошедшим отрезком пути автобуса. Время в расписании отображает затраченное автобусом время на каждый отрезок пути.
[[File:en/Timetable-autofill.png|center|frame|'Автозаполнение' будет измерять длительность движения транспорта, а также длительность остановок на станциях.]]

По мере продвижения вереницы, будем останавливать последний автобус в веренице каждый раз, как только он достигнет новой остановки. Таким образом получится равномерно распределить автобусы по всему маршруту. (Если у Вас иное количество автобусом и/или остановок, то Вам следует иначе распределять транспорт на маршруте. Если какой-либо транспорт после принудительной остановки сообщает, что он опаздывает, то Вам следует просто сбросить счётчик с помощью кнопки ''Reset late counter''). Как только автобус, для которого было включено ''автозаполнение'' выполнит полный круг по маршруту, расписание станет полностью заполненным. Остановим пока что автобус.
[[File:en/Timetable-autofilled.png|center|frame|Выполненное автозаполнение на нашем примере.]]

К несчастью, расчёт времени был выполнен в слишком благоприятных условиях: никаких поломок, пробок. Только автобус, стремительно проходящий на максимальной скорости весь свой путь. Также не было потрачено времени на загрузку и выгрузку груза на станциях, если они были новыми.

Это означает, что представленное рассчитанное расписание слишком оптимистично. Его следует откорректировать, изменив каждую строку в расписании. Для изменения значения необходимо выбрать интересующую строку, нажать '''Изменить время (Change Time)''' и ввести новое значение.
[[File:en/Timetable-slack.png|center|frame|Корректировка расписания добавлением дополнительного времени.]]

Теперь запустим автобусы. Лучше всего это делать во время паузы чтобы быть уверенным, что все они начнут движение одновременно.

Скорее всего, корректировка времени, которая была произведена окажется не совсем верной. Создание корректного расписания является своеобразным ремеслом. Ниже описано [[ru/Manual/Расписание#avtomaticheskoe-raspredelenie-transporta-po-marshrutu|автоматическое]] распределение транспорта по маршруту. Позвольте Вашим автобусам поработать достаточно длительное время (года должно хватить для пары поломок и прочих задержек) и посмотрите что будет отображаться в окне расписания.
[[File:en/Timetable-runninglate.png|center|frame|Из-за недостатка дополнительного времени поломки и прочие задержки привели к отставанию, которое может всё больше и больше накапливаться.]]
Восемь дней - это немного. Однако, разница в задержках показывает, что автобусы распределены не так, как это предполагалось. Чтобы исправить данную ситуацию достаточно добавить ещё немного дополнительного времени в расписание. Ни в коем случае '''не нажимайте''' кнопку '''Reset Late Counter''', что приведёт к сбрасыванию задержек и, соответственно, к тому, что автобусы не будут стараться наверстать график, а станут следовать новому графику, начиная с текущих позиций.
{{ru/Заметка|Если Ваши автобусы не опаздывают, но проводят слишком много времени в ожидании пассажиров на станциях, то, скорее всего, Вы добавили слишком много лишнего времени.}}

Теперь автобусы правильно установлены и Вы можете спокойно пойти заниматься другими делами в то время как они будут исправно придерживаться расписанию. Ниже приведено изображение, иллюстрирующее пример по прошествии 5 лет после установки маршрута.
[[File:en/Timetable-fiveyears.png|center|frame|Правильно подобранное дополнительное время - залог точного соблюдения расписания.]]

Несмотря на частые поломки, они по-прежнему равномерно распределены по маршруту. Но что случится, когда станут доступны новые типы автобусов и они будут [[ru/Manual/Замена транспорта|заменены]]?
[[File:en/Timetable-newbus.png|center|frame|Новые, более быстрые автобусы, придерживаются в рамках расписания посредством дольшего ожидания пассажиров на станции.]]
Хорошая новость состоит в том, что заданное расписание продолжает работать, и Ваши станции регулярно обслуживаются вместо многочасовых ожиданий транспорта и приёма сразу нескольких транспортов одновременно. Плохая новость заключается в том, что новые, более быстрые автобусы вынуждены ожидать на станции пока не наступит время отправления, заданное ещё для старых, медленных автобусов. Поскольку с точки зрения игры здесь нет никаких ошибок (автобусы выдерживают интервалы, грузы доставляются, Вы зарабатываете деньги), то никаких сообщений и предупреждений Вы не получите.

Итак, обратной стороной является то, что Вам ''необходимо обновлять расписание, когда Вы получаете новый транспорт''. Частота использования расписания во многом зависит от того каким способом Вы будете контролировать потоки транспорта (осуществлять контроль, например, можно также с помощью [[ru/Manual/Задания#polnaia-zagruzka|полной загрузки]]), и насколько Вам хватит навыка чтобы вовремя изменять временные задержки для корректировки расписания.

Положительной стороной использования расписания является то, что большим, ''очень'' большим фактором при расчёте [[ru/Manual/Game Mechanics/Main Page#reiting-stantsii|рейтинга станции]] является то, насколько долго станция ожидала транспорта. Люди не захотят по долгу ожидать автобуса, даже если прибывшие одновременно автобусы будут способны перевезти всех пассажиров со станции. Ниже приведено изображение примера по прошествии 10 лет после запуска маршрута.
[[File:en/Timetable-ratings.png|center|frame|Регулярные автобусы поддерживают рейтинг выше, чем если бы это был единый "ком" из автобусов даже если они не способны полностью обслужить потребность в транспорте.]]
Три автобуса явно не достаточно для обслуживания остановки в Overnfield. Но мы избежим ужасного рейтинга (и такого же отношения к нам местных властей) по крайней мере посредством частого обслуживания.

=== Ограничения ===
Из-за особенности реализации расписаний на данный момент, нет глобального отсчета для расписания транспортного средства. Каждое расписание рассчитывается относительно момента, когда оно было сброшено в исходное состояние в последний раз. Это делает некоторые задачи, для которых могут быть использованы расписания в реальном мире, трудными или невозможными:
* Планирование отправки одного транспортного средства с небольшой задержкой после прибытия соединяющего рейса
* Планирование освобождения платформы на станции для экспресса
* Планирование проезда поездов через загруженную развязку так, чтобы ни одному или немногим из них пришлось ждать.
Фактически, трудно решается большинство задач расписания, отличных от создания перерывов между транспортными средствами, обслуживающих один маршрут и имеющих общие задания.

=== Итог ===
* Расписания настраиваются в соответствии с маршрутом и скоростью транспорта. Используйте его для таких вещей, как автобус; поезда обслуживаются лучше, если им дать задание ждать до полной загрузки. Используйте общие задания.
* Используйте '''Автозаполнение''' чтобы получить начальные измерения на которых можно основывать выше расписание.
* Распределяйте ваш транспорт вручную. Сбрасывайте счетчик опозданий, когда он в нужном месте. Или используйте [[ru/Manual/Расписание#avtomaticheskoe-raspredelenie-transporta-po-marshrutu|автоматическое]] распределение — так проще.
* Добавляйте немного времени и подстраивайте, чтобы дать возможность догнать после задержек.
* Устанавливайте весь идущий по маршруту транспорт сразу.
* Повторяйте подстройку после замены на более новый транспорт.

== Автоматическое распределение транспорта по маршруту ==
С версии 1.4.0 (r25377) стало возможно автоматически распределять по маршруту транспорт, используя расписание.

Работает следующим образом:
* Делим количество дней, необходимых для преодоления маршрута согласно расписанию, на количество транспортных средств, имеющих общее расписание. Получаем интервал ожидания между двумя последовательными ТС.
* Дата старта каждого следующего ТС увеличивается на интервал ожидания от даты старта предыдущего.
* Каждое ТС ускоряется или замедляется в зависимости от того, обгоняет оно расписание или отстаёт от него.
* В расписании должно быть достаточно допусков на возможные задержки, чтобы всегда можно было нагнать график.

Предположим, у вас есть автобус со стодневным маршрутом. Тогда если склонировать автобус 9 раз, то получим 10 автобусов, использующих общее расписание. Автоматическое распределение приведёт к тому, что автобусы будут следовать друг за другом с интервалом в 10 дней. Соответственно, каждая остановка на маршруте будет посещена раз в 10 дней.

'''Как этим пользоваться:'''
* Купите транспорт и задайте ему расписание.
* Когда расписание будет готово, заполните его с помощью функции '''Автозаполнение'''.
* Запустите ТС и дайте ему пройти полный путь, чтобы заполнить расписание. Остановите, как только расписание будет готово.
* На вкладке «Расписание» пропустите задания так, чтобы указатель переместился на первое.
* Выключите режим автозаполнения и добавьте допуски по времени в расписание.
* Склонируйте (CTRL-клик) транспорт нужное количество раз. Новые ТС будут иметь общее расписание с исходным.
* Как только все будут готовы, задайте дату начала движения с помощью CTRL-клика на поле '''Начальная дата'''.
* Задайте начальную дату на время в ближайшем будущем, к которому первое транспортное средство гарантированно достигнет первой станции.
* Запустите все транспортные средства. Они пойдут на первую станцию толпой, но после распределятся равномерно.
* Можете убедиться, что дата посещения первой станции в расписаниях всех транспортных средств равномерно распределена.

После заполнения расписания игру можно поставить на паузу, чтобы клонирование и задание расписаний не отнимало игровое время.

Совсем не обязательно дословно следовать вышеприведённой инструкции. Ключевыми моментами является только наличие общего расписания и задание одного и того же времени старта для всех транспортных средств. Если в расписании есть достаточно допусков для компенсации отставания, транспорт рано или поздно распределится по маршруту, в каком бы начальном положении он ни был.

[[Category:en/0.6.0 Features]]
[[Category:ru/Учебник]]
[[Category:ru/Транспортные средства]]